# Burma Automaton Distribution Status

**Last Updated**: 2025-10-21

## Current Build Status

### Snap Package Build - IN PROGRESS ✓
- **Status**: Building with core24 base (Ubuntu 24.04)
- **Fixed Issues**:
  1. Updated from `base: core22` to `base: core24` for better Qt6 support
  2. Changed `architectures` to `platforms` (core24 requirement)
  3. Added comprehensive Qt6 build packages including OpenGLWidgets
- **Expected Output**: `burma-automaton_1.0.0_amd64.snap`
- **Build Log**: Check snap-build.log or background process output

### Tarball Distribution - READY ✓
- **Script**: [build-tarball.sh](build-tarball.sh)
- **Command**: `./build-tarball.sh`
- **Output**: `burma-automaton-1.0.0-linux-amd64.tar.gz`
- **Ready for**: Immediate distribution via GitHub Releases, direct download

### Debian Package - PENDING DEPENDENCIES
- **Script**: [build-deb.sh](build-deb.sh)
- **Blocker**: Missing `debhelper` package
- **To fix**: `sudo apt install debhelper`
- **Command**: `./build-deb.sh`
- **Output**: `../burma-automaton_1.0.0_amd64.deb`

## Package Configurations

### snapcraft.yaml
```yaml
name: burma-automaton
base: core24  # Ubuntu 24.04
version: '1.0.0'
grade: stable
confinement: strict

platforms:
  amd64:

build-packages:
  - build-essential
  - cmake
  - qt6-base-dev
  - libqt6opengl6-dev
  - libqt6openglwidgets6
  - qt6-base-dev-tools
  - libcurl4-openssl-dev
  - libgl-dev
  - libglx-dev
```

### debian/control
```
Package: burma-automaton
Version: 1.0.0
Architecture: amd64
Depends: libqt6core6, libqt6gui6, libqt6widgets6, libqt6opengl6,
         libqt6openglwidgets6, libqt6network6, libcurl4, libgl1
Description: AI-powered 3D world generator for robotics simulation
```

## Distribution Channels

### Option 1: GitHub Releases (Recommended for now)
**Best for**: Quick distribution while snap is being published

**Steps**:
1. Build tarball: `./build-tarball.sh`
2. Create GitHub release at: https://github.com/leo007-htun/Burma_Automaton/releases/new
3. Upload `burma-automaton-1.0.0-linux-amd64.tar.gz`
4. Include SHA256 checksum (generated by build-tarball.sh)
5. Add installation instructions

**User installation**:
```bash
wget https://github.com/leo007-htun/Burma_Automaton/releases/download/v1.0.0/burma-automaton-1.0.0-linux-amd64.tar.gz
tar -xzf burma-automaton-1.0.0-linux-amd64.tar.gz
cd burma-automaton-1.0.0-linux-amd64
./run.sh
```

### Option 2: Ubuntu Snap Store (In Progress)
**Best for**: Official Ubuntu Software Center presence

**Current Status**: Building snap with core24
**Next Steps** (once build completes):
1. Test snap locally: `sudo snap install --dangerous burma-automaton_1.0.0_amd64.snap`
2. Create Snapcraft account: https://snapcraft.io
3. Login: `snapcraft login`
4. Register name: `snapcraft register burma-automaton`
5. Upload: `snapcraft upload burma-automaton_1.0.0_amd64.snap --release=stable`
6. Wait for review (1-5 minutes for automatic, 1-3 days if manual review needed)

**Users install with**:
```bash
sudo snap install burma-automaton
```

### Option 3: PPA (Personal Package Archive)
**Best for**: Ubuntu users who prefer apt

**Setup** (requires Launchpad account):
1. Create PPA at https://launchpad.net
2. Build source package with debuild
3. Upload with dput
4. Launchpad builds for all Ubuntu versions

**Users install with**:
```bash
sudo add-apt-repository ppa:yourname/burma-automaton
sudo apt update
sudo apt install burma-automaton
```

### Option 4: Flathub
**Best for**: Multi-distro support

**Requires**: Creating Flatpak manifest similar to snapcraft.yaml
**Submission**: https://github.com/flathub/flathub

## Dependencies

### Runtime Dependencies (Users need)
1. **Qt6 libraries** (libqt6core6, libqt6gui6, libqt6widgets6, libqt6opengl6, libqt6openglwidgets6, libqt6network6)
2. **OpenGL** (libgl1, libglx0)
3. **libcurl** (libcurl4)

### Optional: BitNet.cpp (for AI world generation)
- **Binary**: `~/BitNet/build/bin/llama-cli`
- **Model**: `~/BitNet/models/BitNet-b1.58-2B-4T/ggml-model-i2_s.gguf`
- **Installation**: See QUICKSTART.md or INSTALL.txt (included in tarball)
- **Fallback**: App works without BitNet.cpp (uses simple geometric worlds)

## Build Issues Resolved

### Issue 1: Qt6OpenGLWidgets not found (core22)
- **Error**: `Failed to find Qt component "OpenGLWidgets"`
- **Solution**: Upgraded to core24 base which has full Qt6 support
- **Status**: RESOLVED ✓

### Issue 2: Wrong architectures syntax (core24)
- **Error**: `'architectures' key is not supported for base 'core24'`
- **Solution**: Changed to `platforms: amd64:` syntax
- **Status**: RESOLVED ✓

### Issue 3: Missing debhelper
- **Error**: Build-deb.sh fails without debhelper package
- **Solution**: Added check to show install command
- **Status**: Documented, user needs to install

## Testing Checklist

Once snap builds successfully:

- [ ] Install snap locally: `sudo snap install --dangerous burma-automaton_1.0.0_amd64.snap`
- [ ] Test launch: `burma-automaton`
- [ ] Test without BitNet.cpp (fallback world generation)
- [ ] Test with BitNet.cpp (AI world generation)
- [ ] Test SDF export functionality
- [ ] Test RViz map conversion
- [ ] Verify file permissions in snap confinement
- [ ] Check if home directory access works (for BitNet paths)

## Documentation Files

All documentation is ready for distribution:

- [README.md](README.md) - Project overview
- [QUICKSTART.md](QUICKSTART.md) - Quick start guide
- [RUN.md](RUN.md) - Detailed usage instructions
- [PACKAGING.md](PACKAGING.md) - Packaging guide
- [UBUNTU_SOFTWARE_CENTER_UPLOAD.md](UBUNTU_SOFTWARE_CENTER_UPLOAD.md) - Upload instructions
- [SNAP_BUILD_NOTES.md](SNAP_BUILD_NOTES.md) - Snap build troubleshooting
- [DISTRIBUTION_STATUS.md](DISTRIBUTION_STATUS.md) - This file

## Next Actions

**Immediate** (while snap builds):
1. Wait for snap build to complete (check background process)
2. Test snap installation locally
3. Fix any snap runtime issues

**Short term**:
1. Build tarball for immediate GitHub release
2. Upload to GitHub Releases
3. Submit snap to Snap Store if tests pass

**Long term**:
1. Consider Flathub for multi-distro support
2. Set up PPA for Ubuntu users
3. Automate builds with CI/CD (GitHub Actions)

## Known Limitations

1. **BitNet.cpp not bundled**: Users must install separately (1.2GB model too large for app package)
2. **Snap confinement**: May have restrictions accessing custom BitNet paths (testing needed)
3. **Qt6 dependency**: Requires Qt6 (not available on older Ubuntu versions <22.04)

## Support

For issues with:
- **Building**: See PACKAGING.md
- **Snap**: See SNAP_BUILD_NOTES.md
- **Usage**: See QUICKSTART.md and RUN.md
- **Upload**: See UBUNTU_SOFTWARE_CENTER_UPLOAD.md

## Monitor Snap Build Progress

```bash
# Check build output
tail -f snap-build.log

# Or check background process
# Background Bash ID: 9f7409
```

Build typically takes 5-15 minutes depending on system.
